<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Malla Curricular - Profesorado de Matemática</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    .grid {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }
    .year {
      background-color: #ffffff;
      border-radius: 8px;
      padding: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      min-width: 200px;
    }
    .year h2 {
      text-align: center;
      color: #2980b9;
    }
    .subject {
      margin: 5px 0;
      padding: 8px;
      border-radius: 5px;
      background-color: #ecf0f1;
      cursor: pointer;
      transition: 0.2s;
      position: relative;
    }
    .subject.completed {
      background-color: #2ecc71;
      color: white;
    }
    .subject.locked {
      background-color: #bdc3c7;
      cursor: not-allowed;
    }
    .tooltip {
      visibility: hidden;
      background-color: #333;
      color: #fff;
      text-align: center;
      border-radius: 5px;
      padding: 4px 8px;
      position: absolute;
      z-index: 1;
      top: -5px;
      left: 105%;
      white-space: nowrap;
    }
    .subject:hover .tooltip {
      visibility: visible;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Profesorado de Matemática</h1>
  <div class="grid" id="curriculum"></div>

  <script>
    const data = {
      "1er Año": [
        "Pedagogía",
        "Didáctica General",
        "Psicología Educacional",
        "Lectura, Escritura y Oralidad",
        "Problemática de la Educación Secundaria",
        "Elementos de Aritmética y Algebra",
        "Geometría I",
        "EDI",
        "Práctica Profesional I"
      ],
      "2do Año": [
        { name: "Historia y Política Educacional Argentina", req: ["Pedagogía"] },
        { name: "Sociología de la Educación", req: ["Problemática de la Educación Secundaria"] },
        { name: "Tecnologías de la Información y la Comunicación", req: ["Lectura, Escritura y Oralidad"] },
        { name: "Sujetos de la Educación Secundaria", req: ["Psicología Educacional", "Problemática de la Educación Secundaria"] },
        { name: "Didáctica de la Matemática I", req: ["Didáctica General", "Elementos de Aritmética y Algebra", "Geometría I"] },
        { name: "Algebra I", req: ["Elementos de Aritmética y Algebra", "Geometría I"] },
        { name: "Geometría II", req: ["Elementos de Aritmética y Algebra", "Geometría I"] },
        { name: "Análisis Matemático I", req: ["Elementos de Aritmética y Algebra", "Geometría I"] },
        "EDI",
        { name: "Práctica Profesional II", req: ["Práctica Profesional I", "Pedagogía", "Lectura, Escritura y Oralidad", "Problemática de la Educación Secundaria"] }
      ],
      "3er Año": [
        { name: "Filosofía de la Educación", req: ["Historia y Política Educacional Argentina"] },
        { name: "Formación Ética y Ciudadana", req: ["Sociología de la Educación"] },
        { name: "Algebra II", req: ["Didáctica de la Matemática I", "Algebra I", "Geometría II", "Análisis Matemático I"] },
        { name: "Análisis Matemática II", req: ["Algebra I", "Geometría II", "Análisis Matemático I"] },
        { name: "Probabilidades y Estadísticas I", req: ["Algebra I", "Análisis Matemático I"] },
        { name: "Producción de Recursos Didácticos y Digitales para la Enseñanza", req: ["Tecnologías de la Información y la Comunicación"] },
        "EDI",
        { name: "Práctica Profesional III Ciclo Básico del Nivel Secundario", req: ["Práctica Profesional II", "Didáctica de la Matemática I"] },
        { name: "Didáctica de la Matemática II", req: ["Didáctica de la Matemática I", "Algebra I", "Geometría II", "Análisis Matemático I"] }
      ],
      "4to Año": [
        { name: "Educación Sexual Integral", req: ["Sujetos de la Educación Secundaria"] },
        "EDI",
        { name: "Transformaciones Geométricas", req: ["Algebra II", "Análisis Matemática II"] },
        { name: "Probabilidades y Estadísticas II", req: ["Algebra II", "Análisis Matemática II", "Probabilidades y Estadísticas I"] },
        { name: "Didáctica de la Matemática III", req: ["Didáctica de la Matemática II", "Algebra II", "Análisis Matemática II", "Probabilidades y Estadísticas I"] },
        { name: "Historia y Epistemología de la Matemática", req: ["Algebra II", "Análisis Matemática II", "Didáctica de la Matemática II"] },
        { name: "Análisis en Varias Variables", req: ["Algebra II", "Análisis Matemática II"] },
        { name: "Práctica Profesional IV y Residencia Docente en el Ciclo Orientado del Nivel Secundario", req: ["Práctica Profesional III Ciclo Básico del Nivel Secundario", "Didáctica de la Matemática II"] }
      ]
    };

    const completed = JSON.parse(localStorage.getItem("completedSubjects") || "[]");

    function saveProgress() {
      localStorage.setItem("completedSubjects", JSON.stringify(completed));
    }

    function render() {
      const container = document.getElementById("curriculum");
      container.innerHTML = "";
      for (const [year, subjects] of Object.entries(data)) {
        const col = document.createElement("div");
        col.className = "year";
        col.innerHTML = `<h2>${year}</h2>`;
        subjects.forEach(subj => {
          const subjName = typeof subj === "string" ? subj : subj.name;
          const reqs = typeof subj === "string" ? [] : subj.req;
          const el = document.createElement("div");
          el.className = "subject";
          el.textContent = subjName;

          const unmet = reqs.filter(r => !completed.includes(r));
          if (completed.includes(subjName)) {
            el.classList.add("completed");
          } else if (unmet.length > 0) {
            el.classList.add("locked");
            const tip = document.createElement("span");
            tip.className = "tooltip";
            tip.textContent = "Falta: " + unmet.join(", ");
            el.appendChild(tip);
          }

          el.addEventListener("click", () => {
            if (el.classList.contains("locked")) return;
            if (completed.includes(subjName)) {
              const idx = completed.indexOf(subjName);
              completed.splice(idx, 1);
            } else {
              completed.push(subjName);
            }
            saveProgress();
            render();
          });

          col.appendChild(el);
        });
        container.appendChild(col);
      }
    }

    render();
  </script>
</body>
</html>
